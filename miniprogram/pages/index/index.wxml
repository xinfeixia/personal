<view class="container">
  <!-- 分类导航 -->
  <scroll-view scroll-x class="category-scroll">
    <view class="category-list">
      <view 
        class="category-item {{currentCategory === item.id ? 'active' : ''}}"
        wx:for="{{categories}}"
        wx:key="id"
        bindtap="selectCategory"
        data-id="{{item.id}}"
      >
        <image wx:if="{{item.icon}}" src="{{item.icon}}" class="category-icon" />
        <text>{{item.name}}</text>
      </view>
    </view>
  </scroll-view>

  <!-- 菜品列表 -->
  <view class="dish-list">
    <view 
      class="dish-item card"
      wx:for="{{dishes}}"
      wx:key="id"
    >
      <image src="{{item.image}}" class="dish-image" mode="aspectFill" />
      <view class="dish-info">
        <view class="dish-name">{{item.name}}</view>
        <view class="dish-desc">{{item.description}}</view>
        <view class="dish-footer">
          <view class="dish-price">
            <text class="price">¥{{item.price}}</text>
            <text class="original-price" wx:if="{{item.original_price}}">¥{{item.original_price}}</text>
          </view>
          <view class="dish-actions">
            <view class="cart-control" wx:if="{{item.count > 0}}">
              <view class="btn-minus" bindtap="decreaseCount" data-id="{{item.id}}">-</view>
              <text class="count">{{item.count}}</text>
            </view>
            <view class="btn-add" bindtap="increaseCount" data-id="{{item.id}}">+</view>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- 购物车 -->
  <view class="cart-bar" wx:if="{{totalCount > 0}}">
    <view class="cart-info" bindtap="goToCart">
      <view class="cart-icon-wrapper">
        <image src="/images/cart.png" class="cart-icon" />
        <view class="cart-badge">{{totalCount}}</view>
      </view>
      <view class="cart-price">¥{{totalPrice}}</view>
    </view>
    <view class="btn-checkout" bindtap="goToCart">去结算</view>
  </view>
</view>

