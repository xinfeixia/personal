<view class="container">
  <view class="status-card card" wx:if="{{order}}">
    <view class="status-icon">
      <image src="/images/status-{{order.status}}.png" class="icon" mode="aspectFit" />
    </view>
    <view class="status-text">{{getStatusText(order.status)}}</view>
  </view>

  <view class="info-card card" wx:if="{{order}}">
    <view class="card-title">è®¢å•ä¿¡æ¯</view>
    <view class="info-item">
      <text class="label">è®¢å•ç±»å‹</text>
      <text class="value order-type-badge {{order.order_type}}">
        {{order.order_type === 'dine_in' ? 'ğŸ½ï¸ å ‚é£Ÿ' : 'ğŸšš å¤–å–'}}
      </text>
    </view>
    <view class="info-item">
      <text class="label">è®¢å•å·</text>
      <text class="value">{{order.order_no}}</text>
    </view>
    <view class="info-item">
      <text class="label">ä¸‹å•æ—¶é—´</text>
      <text class="value">{{order.created_at}}</text>
    </view>
    <view class="info-item" wx:if="{{order.paid_at}}">
      <text class="label">æ”¯ä»˜æ—¶é—´</text>
      <text class="value">{{order.paid_at}}</text>
    </view>
  </view>

  <!-- å ‚é£Ÿä¿¡æ¯ -->
  <view class="info-card card" wx:if="{{order && order.order_type === 'dine_in'}}">
    <view class="card-title">å ‚é£Ÿä¿¡æ¯</view>
    <view class="info-item" wx:if="{{order.table_number}}">
      <text class="label">æ¡Œå·</text>
      <text class="value">{{order.table_number}}</text>
    </view>
    <view class="info-item" wx:if="{{order.serve_time}}">
      <text class="label">ä¸Šèœæ—¶é—´</text>
      <text class="value">{{order.serve_time}}</text>
    </view>
    <view class="info-item">
      <text class="label">è”ç³»äºº</text>
      <text class="value">{{order.contact_name}}</text>
    </view>
    <view class="info-item">
      <text class="label">è”ç³»ç”µè¯</text>
      <text class="value">{{order.contact_phone}}</text>
    </view>
    <view class="info-item" wx:if="{{order.remark}}">
      <text class="label">å¤‡æ³¨</text>
      <text class="value">{{order.remark}}</text>
    </view>
  </view>

  <!-- å¤–å–é…é€ä¿¡æ¯ -->
  <view class="info-card card" wx:if="{{order && order.order_type === 'delivery'}}">
    <view class="card-title">é…é€ä¿¡æ¯</view>
    <view class="info-item">
      <text class="label">è”ç³»äºº</text>
      <text class="value">{{order.contact_name}}</text>
    </view>
    <view class="info-item">
      <text class="label">è”ç³»ç”µè¯</text>
      <text class="value">{{order.contact_phone}}</text>
    </view>
    <view class="info-item">
      <text class="label">é…é€åœ°å€</text>
      <text class="value">{{order.delivery_address}}</text>
    </view>
    <view class="info-item" wx:if="{{order.remark}}">
      <text class="label">å¤‡æ³¨</text>
      <text class="value">{{order.remark}}</text>
    </view>
  </view>

  <view class="dishes-card card" wx:if="{{order}}">
    <view class="card-title">è®¢å•å•†å“</view>
    <view class="dish-item" wx:for="{{order.items}}" wx:key="id">
      <image src="{{item.dish_image}}" class="dish-image" mode="aspectFill" />
      <view class="dish-info">
        <text class="dish-name">{{item.dish_name}}</text>
        <text class="dish-quantity">x{{item.quantity}}</text>
      </view>
      <text class="dish-price">Â¥{{item.price}}</text>
    </view>
    <view class="total-row">
      <text class="total-label">åˆè®¡</text>
      <text class="total-price">Â¥{{order.total_amount}}</text>
    </view>
  </view>

  <view class="actions" wx:if="{{order && order.status === 'pending'}}">
    <button class="btn-cancel" bindtap="cancelOrder">å–æ¶ˆè®¢å•</button>
    <button class="btn-pay btn-primary" bindtap="payOrder">å»æ”¯ä»˜</button>
  </view>
</view>

